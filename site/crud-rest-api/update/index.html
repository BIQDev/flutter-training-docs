
<!doctype html>
<html lang="id" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://biqdev.com/tutorial/flutter/crud-rest-api/update/">
      
      
        <meta name="author" content="bayu@biqdev.com">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.6">
    
    
      
        <title>(U)pdate - Flutter training</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6910b76c.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.196e0c26.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#update" class="md-skip">
          Lewati ke isi
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://biqdev.com/tutorial/flutter" title="Flutter training" class="md-header-nav__button md-logo" aria-label="Flutter training">
      
  <img src="../../assets/images/biq-logo.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Flutter training
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              (U)pdate
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Cari" placeholder="Cari" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://biqdev.com/tutorial/flutter" title="Flutter training" class="md-nav__button md-logo" aria-label="Flutter training">
      
  <img src="../../assets/images/biq-logo.png" alt="logo">

    </a>
    Flutter training
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Welcome
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    <label class="md-nav__link" for="nav-2">
      CRUD REST API
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="CRUD REST API" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        CRUD REST API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../overview/" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../grid-setup/" class="md-nav__link">
      Grid Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../provider/" class="md-nav__link">
      Provider
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../provider-setup/" class="md-nav__link">
      Provider setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../booklist-mockup/" class="md-nav__link">
      Booklist mockup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../create/" class="md-nav__link">
      (C)reate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../read/" class="md-nav__link">
      (R)ead
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../create-then-read/" class="md-nav__link">
      (C)eate kemudian (R)ead
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        (U)pdate
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      (U)pdate
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Daftar isi">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Daftar isi
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ui-button-onpressed" class="md-nav__link">
    UI button onPressed
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uiux-screen-update" class="md-nav__link">
    UI/UX screen update
  </a>
  
    <nav class="md-nav" aria-label="UI/UX screen update">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-current-value-nilai-data-saat-ini" class="md-nav__link">
    1. Current value / nilai data saat ini
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Daftar isi">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Daftar isi
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ui-button-onpressed" class="md-nav__link">
    UI button onPressed
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uiux-screen-update" class="md-nav__link">
    UI/UX screen update
  </a>
  
    <nav class="md-nav" aria-label="UI/UX screen update">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-current-value-nilai-data-saat-ini" class="md-nav__link">
    1. Current value / nilai data saat ini
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="update">(U)pdate</h1>
<p>Berikutnya kita akan "menjahit" ke REST API kita fungsi (U)pdate</p>
<h2 id="ui-button-onpressed">UI button <code>onPressed</code></h2>
<p>Langkah pertama kita adalah mengatur UI kita. Yaitu mem-<em>bind</em> tombol edit kita pada <em>property</em> <code>onPressed</code> dengan fungsi yang akan memanggil UI input.</p>
<p>Buka file <code>lib/widgets/home/book-list-item.dart</code>. kemudian ubah/tambah sesuai dengan baris yang ter-<em>highlight</em> berikut:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="s1">&#39;package:flutter/material.dart&#39;</span><span class="p">;</span>

<span class="hll"><span class="k">import</span> <span class="s1">&#39;package:perpus/screens/book-input.dart&#39;</span><span class="p">;</span>
</span><span class="hll">
</span><span class="kd">class</span> <span class="nc">BookListItem</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="p">{</span>
  <span class="nd">@required</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">apiHost</span><span class="p">;</span>
  <span class="nd">@required</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">id</span><span class="p">;</span>
  <span class="nd">@required</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">title</span><span class="p">;</span>
  <span class="nd">@required</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">imagePath</span><span class="p">;</span>

  <span class="n">BookListItem</span><span class="p">({</span><span class="k">this</span><span class="p">.</span><span class="n">apiHost</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">id</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">title</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">imagePath</span><span class="p">});</span>

<span class="hll">  <span class="n">_update</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">    <span class="n">Navigator</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="n">context</span><span class="p">).</span><span class="n">pushNamed</span><span class="p">(</span>
</span><span class="hll">      <span class="n">BookInputScreen</span><span class="p">.</span><span class="n">routeName</span><span class="p">,</span>
</span><span class="hll">      <span class="nl">arguments:</span> <span class="n">BookInputScreenArguments</span><span class="p">(</span>
</span><span class="hll">          <span class="nl">id:</span> <span class="k">this</span><span class="p">.</span><span class="n">id</span><span class="p">,</span> <span class="nl">title:</span> <span class="k">this</span><span class="p">.</span><span class="n">title</span><span class="p">,</span> <span class="nl">imagePath:</span> <span class="k">this</span><span class="p">.</span><span class="n">imagePath</span><span class="p">),</span>
</span><span class="hll">    <span class="p">);</span>
</span><span class="hll">  <span class="p">}</span>
</span><span class="hll">
</span>  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">GridTile</span><span class="p">(</span>
      <span class="nl">child:</span> <span class="n">Image</span><span class="p">.</span><span class="n">network</span><span class="p">(</span>
        <span class="s2">&quot;</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="n">apiHost</span><span class="si">}</span><span class="s2">/perpus-api/</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="n">imagePath</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="nl">width:</span> <span class="m">80</span><span class="p">,</span>
        <span class="nl">height:</span> <span class="m">80</span><span class="p">,</span>
        <span class="nl">fit:</span> <span class="n">BoxFit</span><span class="p">.</span><span class="n">cover</span><span class="p">,</span>
      <span class="p">),</span>
      <span class="nl">header:</span> <span class="n">Row</span><span class="p">(</span>
        <span class="nl">mainAxisAlignment:</span> <span class="n">MainAxisAlignment</span><span class="p">.</span><span class="n">end</span><span class="p">,</span>
        <span class="nl">children:</span> <span class="p">[</span>
          <span class="n">IconButton</span><span class="p">(</span>
              <span class="nl">splashColor:</span> <span class="n">Colors</span><span class="p">.</span><span class="n">orange</span><span class="p">[</span><span class="m">100</span><span class="p">],</span>
              <span class="nl">color:</span> <span class="n">Colors</span><span class="p">.</span><span class="n">deepOrangeAccent</span><span class="p">,</span>
              <span class="nl">icon:</span> <span class="n">Icon</span><span class="p">(</span><span class="n">Icons</span><span class="p">.</span><span class="n">edit</span><span class="p">),</span>
<span class="hll">              <span class="nl">onPressed:</span> <span class="p">()</span> <span class="p">{</span>
</span><span class="hll">                <span class="k">this</span><span class="p">.</span><span class="n">_update</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>
</span><span class="hll">              <span class="p">}),</span>
</span>          <span class="n">IconButton</span><span class="p">(</span>
            <span class="nl">color:</span> <span class="n">Colors</span><span class="p">.</span><span class="n">redAccent</span><span class="p">,</span>
            <span class="nl">icon:</span> <span class="n">Icon</span><span class="p">(</span><span class="n">Icons</span><span class="p">.</span><span class="n">delete</span><span class="p">),</span>
            <span class="nl">onPressed:</span> <span class="p">()</span> <span class="p">{},</span>
          <span class="p">),</span>
        <span class="p">],</span>
      <span class="p">),</span>
  <span class="p">...</span>
</code></pre></div>
</td></tr></table>
<p>Pada dasarnya kita memanggil UI yang sama dengan yang kita gunakan untuk (C)reate. Untuk membedakan tampilan input UI nya, kita menggunakan <em>property</em> <code>argument</code>. <em>Property</em> tersebut adalah bagian dari <code>Navigator.of(context).pushNamed()</code>.</p>
<p>Penggunaan <code>argument</code> tersebut bisa dilihat pada code diatas baris ke-20, yaitu <code>arguments: BookInputScreenArguments(...)</code></p>
<p>Logic nya adalah, jika <code>title</code> pada <code>argument</code> kosong, maka UI input screen <code>BookInputScreen</code> akan memiliki <em>behavior</em> mode (C)reate. Sebaliknya, jika <code>title</code> pada <code>argument</code> berisi string tertentu, maka UI input screen <code>BookInputScreen</code> akan pada mode (U)pdate.</p>
<p>Logic tersebut sudah tersedia pada <code>lib/screens/book-input.dart</code>. Hanya saja kita perlu sedikit menambahkan code untuk "mengambil <code>argument</code>" yang kita kirim dari <code>arguments: BookInputScreenArguments()</code> pada code diatas. Mari kita buka file <code>lib/screens/book-input.dart</code>, tambah/ubah code seperti pada baris ter-<em>highlight</em> berikut:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>85
86
87
88
89
90
91
92
93
94
95
96
97</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  <span class="p">...</span>
  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">bool</span> <span class="n">isCreating</span> <span class="o">=</span> <span class="n">context</span><span class="p">.</span><span class="n">watch</span><span class="o">&lt;</span><span class="n">BookListProvider</span><span class="o">&gt;</span><span class="p">().</span><span class="n">isCreating</span><span class="p">;</span>
<span class="hll">    <span class="k">this</span><span class="p">.</span><span class="n">_args</span> <span class="o">=</span> <span class="n">ModalRoute</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="n">context</span><span class="p">).</span><span class="n">settings</span><span class="p">.</span><span class="n">arguments</span><span class="p">;</span>
</span>    <span class="k">return</span> <span class="n">Scaffold</span><span class="p">(</span>
      <span class="nl">appBar:</span> <span class="n">AppBar</span><span class="p">(</span>
        <span class="nl">title:</span> <span class="k">this</span><span class="p">.</span><span class="n">_args</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="n">_args</span><span class="p">.</span><span class="n">id</span> <span class="o">==</span> <span class="kc">null</span>
            <span class="o">?</span> <span class="k">const</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;Tambah Buku&quot;</span><span class="p">)</span>
            <span class="o">:</span> <span class="k">const</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;Edit Buku&quot;</span><span class="p">),</span>
      <span class="p">),</span>
      <span class="nl">body:</span> <span class="n">Padding</span><span class="p">(</span>
  <span class="p">...</span>
</code></pre></div>
</td></tr></table>
<p>Sekarang, coba simpan dan jalankan aplikasi android kita, kemudian click/tap icon "edit" pada salah satu buku. Seharusnya "screen" dari input kita akan memiliki title "Edit Buku" pada bagian kiri atas. Bukan "Tambah buku" seperti pada prosedur (C)reate.</p>
<h2 id="uiux-screen-update">UI/UX screen update</h2>
<p>Kita akan menerapkan beberapa <em>rules</em> atau aturan untuk membuat UI/UX kita terasa nyaman pada halaman UI (U)pdate sebagai berikut:</p>
<ol>
<li><em>Current value</em>, atau nilai data saat ini yang sedang diedit, yang akan kita tampilkan pada halaman UI (U)pdate adalah judul buku atau <em>title</em>. </li>
<li>Halaman input tidak akan menampilkan gambar saat ini</li>
<li>Jika user ingin mengganti gambar, dan memilih gambar, maka gambar baru akan ditampilkan pada form input</li>
</ol>
<h3 id="1-current-value-nilai-data-saat-ini">1. Current value / nilai data saat ini</h3>
<p>Pertama kita akan mengeset input kita dengan data yang sedang diedit. Untuk itu kita perlu mengeset field "title" pada input form kita. Akan tetapi, kita tidak akan melakukan set data dari <em>lifecycle</em> <code>build()</code> yang biasa kita buat dengan code <code>Widget build(BuildContext context)</code>. Karena mengeset data dari <em>lifecycle</em> <code>build()</code>, bisa berdampak pada <em>recursive</em> calls, atau pemanggilan fungsi yang berulang tanpa akhir.</p>
<p>Oleh karena itu kita akan menggunakan <em>lifecycle</em> <code>didChangeDependencies()</code>, yang mana akan dipanggil sebelum terjadinya <em>lifecycle</em> <code>build</code>. Untuk itu, buka file <code>lib/screens/book-input.dart</code> kemudian ubah/tambah sesuai baris yang ter-<em>highlight</em> berikut:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">import</span> <span class="s1">&#39;package:flutter/material.dart&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="s1">&#39;dart:io&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="s1">&#39;package:image_picker/image_picker.dart&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="s1">&#39;package:provider/provider.dart&#39;</span><span class="p">;</span>

<span class="k">import</span> <span class="s1">&#39;package:perpus/models/booklist_model.dart&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="s1">&#39;package:perpus/providers/booklist_provider.dart&#39;</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">BookInputScreenArguments</span> <span class="p">{</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">id</span><span class="p">;</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">title</span><span class="p">;</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">imagePath</span><span class="p">;</span>
  <span class="n">BookInputScreenArguments</span><span class="p">({</span><span class="k">this</span><span class="p">.</span><span class="n">id</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">title</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">imagePath</span><span class="p">});</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">BookInputScreen</span> <span class="kd">extends</span> <span class="n">StatefulWidget</span> <span class="p">{</span>
  <span class="kd">static</span> <span class="k">const</span> <span class="n">routeName</span> <span class="o">=</span> <span class="s2">&quot;/book-add&quot;</span><span class="p">;</span>

  <span class="nd">@override</span>
  <span class="n">_BookInputScreenState</span> <span class="n">createState</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="n">_BookInputScreenState</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">_BookInputScreenState</span> <span class="kd">extends</span> <span class="n">State</span><span class="o">&lt;</span><span class="n">BookInputScreen</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="kt">String</span> <span class="n">_title</span><span class="p">;</span>
  <span class="kt">bool</span> <span class="n">_inputIsValid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="n">BookInputScreenArguments</span> <span class="n">_args</span><span class="p">;</span>
<span class="hll">  <span class="kt">bool</span> <span class="n">_isInitialized</span><span class="p">;</span> <span class="c1">// Berfungsi untuk mencegah pemanggilan ganda</span>
</span>
  <span class="n">File</span> <span class="n">_image</span><span class="p">;</span>
  <span class="kd">final</span> <span class="n">picker</span> <span class="o">=</span> <span class="n">ImagePicker</span><span class="p">();</span>

  <span class="n">Future</span> <span class="n">_pickImage</span><span class="p">()</span> <span class="kd">async</span> <span class="p">{</span>
    <span class="kd">final</span> <span class="n">pickedFile</span> <span class="o">=</span> <span class="kd">await</span> <span class="n">picker</span><span class="p">.</span><span class="n">getImage</span><span class="p">(</span><span class="k">source</span><span class="o">:</span> <span class="n">ImageSource</span><span class="p">.</span><span class="n">gallery</span><span class="p">);</span>

    <span class="n">setState</span><span class="p">(()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">pickedFile</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">_image</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="n">pickedFile</span><span class="p">.</span><span class="n">path</span><span class="p">);</span>

        <span class="k">this</span><span class="p">.</span><span class="n">_setInputValid</span><span class="p">();</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">print</span><span class="p">(</span><span class="s1">&#39;No image selected.&#39;</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>

<span class="hll">  <span class="nd">@override</span>
</span><span class="hll">  <span class="kt">void</span> <span class="n">didChangeDependencies</span><span class="p">()</span> <span class="p">{</span>
</span><span class="hll">    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">_isInitialized</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="n">_isInitialized</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">      <span class="k">this</span><span class="p">.</span><span class="n">_args</span> <span class="o">=</span> <span class="n">ModalRoute</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="n">context</span><span class="p">).</span><span class="n">settings</span><span class="p">.</span><span class="n">arguments</span><span class="p">;</span>
</span><span class="hll">      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">_args</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="n">_args</span><span class="p">.</span><span class="n">id</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">        <span class="k">this</span><span class="p">.</span><span class="n">_title</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="n">_args</span><span class="p">.</span><span class="n">title</span><span class="p">;</span>
</span><span class="hll">      <span class="p">}</span>
</span><span class="hll">
</span><span class="hll">      <span class="k">this</span><span class="p">.</span><span class="n">_setInputValid</span><span class="p">();</span>
</span><span class="hll">      <span class="k">this</span><span class="p">.</span><span class="n">_isInitialized</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class="hll">    <span class="p">}</span>
</span><span class="hll">    <span class="k">super</span><span class="p">.</span><span class="n">didChangeDependencies</span><span class="p">();</span>
</span><span class="hll">  <span class="p">}</span>
</span><span class="hll">
</span>  <span class="kt">void</span> <span class="n">_setInputValid</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="n">_inputIsValid</span> <span class="o">=</span>
        <span class="k">this</span><span class="p">.</span><span class="n">_title</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="n">_title</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="n">_image</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="p">...</span>
</code></pre></div>
</td></tr></table>
<p>Pada code diatas, variable <code>_isInitialized</code> berfungsi untuk memastikan pengesetan input "title" hanya terjadi satu kali. Karena <em>lifecycle</em> <code>didChangeDependencies()</code> akan dipanggil beberapa kali pada proses "inisialisasi" sebuah <em>widget</em>.</p>
<p>Simpan perubahan dan jalankan aplikasi. Seharusnya saat menekan tombol edit, field input "title" akan otomatis terisi sesuai nilai sekarang dari buku yang kita edit.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../create-then-read/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Sebelumnya
                </span>
                (C)eate kemudian (R)ead
              </div>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 www.biqdev.com;
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.fd16492e.min.js"></script>
      <script src="../../assets/javascripts/bundle.7836ba4d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Salin ke memori", "clipboard.copied": "Tersalin ke memori", "search.config.lang": "en", "search.config.pipeline": " ", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Cari", "search.result.placeholder": "Ketik untuk mulai pencarian", "search.result.none": "Tidak ada dokumen yang sesuai", "search.result.one": "1 dokumen ditemukan", "search.result.other": "# dokumen ditemukan", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>